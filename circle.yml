machine:
  java:
    version: oraclejdk8
  services:
    - docker
  timezone:
    Europe/Berlin

dependencies:
  pre:
    - mvn install    
  override:    
    - docker info
    - mvn verify docker:build
    
test:
  override:
  - mvn verify  
  post:
  - git config user.name "fred4jupiter"
  - git config user.email "hamsterhase@gmx.de"

deployment:
  hub:
    branch: master
    commands:
      - ./release.sh
      - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
      - docker tag -f fred4jupiter/fredbet hamsterhase/fredbet:$CIRCLE_BUILD_NUM
      - docker push hamsterhase/fredbet:$CIRCLE_BUILD_NUM
    